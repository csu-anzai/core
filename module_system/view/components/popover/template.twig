
<div class="core-component-popover">
    <span href="#" title="{{ title|escape("html_attr") }}" data-toggle="popover" data-html="true" data-placement="{{ placement|escape("html_attr") }}" data-trigger="{{ trigger|escape("html_attr") }}" id="{{ id|escape("html_attr") }}">{{ link|raw }}</span>

    {% if contentEndpoint %}
        <div id="pc_{{ id|escape("html_attr") }}" class="hidden pc_{{ id|escape("html_attr") }}"><div class="lc_{{ id|escape("html_attr") }}"></div></div>
        <script type="text/javascript">
         $('#{{ id|escape("html_attr") }}').popover({ content: function() { return $('#pc_{{ id|escape("html_attr") }}').html()}}).on('show.bs.popover', function() {

                if($('#pc_{{ id|escape("js") }}').hasClass('loadDone')) {
                    return;
                }
                Ajax.loadUrlToElement('.lc_{{ id|escape("html_attr") }}', '{{ contentEndpoint|raw }}', '', false, 'post', function() {});
                $('#pc_{{ id|escape("html_attr") }}').addClass('loadDone');
            })
        </script>
    {% else %}
        <div id="pc_{{ id|escape("html_attr") }}" class="hidden pc_{{ id|escape("html_attr") }}">{{ content|raw }}</div>
        <script type="text/javascript">
        $('#{{ id|escape("html_attr") }}').popover({ content: $('#pc_{{ id|escape("html_attr") }}').html()})
        </script>
    {% endif %}
</div>
